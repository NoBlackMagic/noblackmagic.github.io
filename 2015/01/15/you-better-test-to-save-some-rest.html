<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/css/medium.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    </head>
    <body>
        <script>
(function(){
    // disable GS for development
    if (document.location.href.indexOf("localhost:") !== -1) {
        console.log('GA Disabled during Development');
        return;
    };
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    // Analytics Account Data
    ga('create', 'UA-52991368-1', 'auto');
    ga('send', 'pageview');
})();
</script>
        <div class="container">
            <div class="post-header">

    
    <img src="/images/articles/unpredictability.jpg"
         class="img-circle center-block post-img"
         style="width: 100px; margin: 2rem auto" />
    

    <h1>You'd better Test to save some Rest</h1>
    <h2>a strategy to fight the big <em>WTF</em> that is always lurking</h2>

    <blockquote>
        <time datetime="2015-01-15T10:16:56+01:00">Jan 15, 2015</time>
        <br>by <b>Marco Pegoraro</b>
    </blockquote>
</div>

<div class="post-content">
    <p>Since the day I became a developer, I’ve always feared the <em>Big What The Fuck</em>.</p>

<p>The <em>BWTF</em> is not only related to the code you write, it is the lack of knowledge that threatens to crush your entire project. It can be as simple as a server misconfiguration that causes a gaping security flaw.</p>

<p><img src="/images/articles/dude-wtf.jpg" alt="dude wtf?" class="img-circle center-block post-img" /></p>

<p>When the <em>BWTF</em> strike, there is nowhere to go; there is no place to hide. The <em>BWTF</em> is like the worst earthquake in the world: no building endures. A big part of your application, job and/or reputation goes to waste. And nobody wants this to happen.</p>

<blockquote>
  <p>How can you protect yourself from the <em>Big What The Fuck</em>?</p>
</blockquote>

<p>Well, the first step is to accept that this risk exists. The next step is to conceive a strategy to mitigate that risk. After more than 10 years striving to avoid the <em>BWTF</em> I am now quite sure there is no way to remove that risk from your life. It is part of your life.</p>

<blockquote>
  <p>The best strategy to mitigate the risk of a <em>Big What The Fuck</em> is <strong>Testing</strong>.</p>
</blockquote>

<p>I am not constraining the discussion to the source code. You should consider testing to be a strategy for a better life, with or without code. A strategy that you can use to fight the <em>BWTF</em>. Which is always lurking behind every corner, always present.</p>

<p>Say you plan to go holiday to the Red Sea, let’s try to work out a test to stress that decision:</p>

<ul>
  <li>will I relax enough?</li>
  <li>will I cope with 6 days without my Mac?</li>
  <li>will it be safe?</li>
  <li>will I gain 4 pounds by eating all the time?</li>
</ul>

<p>You do the same activity when coding a procedure that takes 2 integers and return the sum:</p>

<ul>
  <li>is <code class="highlighter-rouge">sum(1, 1)</code> equal to <code class="highlighter-rouge">2</code>?</li>
  <li>does <code class="highlighter-rouge">sum('a', 2)</code> throw an exception?</li>
  <li>is <code class="highlighter-rouge">sum('a', 2)</code> exception a <code class="highlighter-rouge">wrongInputType</code> exception?</li>
</ul>

<blockquote>
  <p>The more tests that you are able to produce against a decision / procedure, the bigger 
chance you have to find early issues, with less of a risk of a <em>Big What The Fuck</em> 
in the future.</p>
</blockquote>

<p>When it comes to a code scenario the most likely <em>BWTF</em> is to forget to consider a minor requirement from the customer. Then you deliver a product that will fail in the future when that minor requirement will manifest. Your phone will ring like crazy, your inbox will choke and you’ll move abroad to escape your shame.</p>

<blockquote>
  <p>The <em>BWTF</em> is due to the unpredictability of when the problem will arise.</p>
</blockquote>

<p><img src="/images/articles/unpredictability.jpg" alt="life is unpredictable" class="img-circle center-block post-img" /></p>

<p>The later it shows up, the less you’ll recall what the minor requirement was and where the problem lies within the code base. And how the hell it works! By the time an issue like that manifests itself, you may have moved to another technology.</p>

<p>In real life a <em>Big What The Fuck</em> can be even worse. Almost four years ago I bought a brand new house and I took a loan for it. Less than two years later I moved to Sweden to join a challenging job opportunity. To this date I still haven’t sold that house, but I’m still paying the mortgage. Of course this is not a life threatening issue, but I can assure you it is annoying to throw away money like that. What if I had prepared myself with a more accurate test when I decided to buy the house?</p>

<ul>
  <li>are my career opportunities well developed close to the house?</li>
  <li>does my career ask me to be flexible about my location?</li>
  <li>will it be possible to sell the house without losing big money on it?</li>
</ul>

<p>Well, I must confess that I didn’t create any of those tests at the time of the buying.</p>

<p>As you can see by yourself there is no known ways to completely remove the risk of a <em>Big What The Fuck</em>. The right way to behave is to mitigate that risk by running every decision / procedure against a <em>good amount of tests</em>. What the word <em>good</em> means in this context is up to you, but in general the more the tests the less the risk.</p>

<p>Another important point is that you can build you tests through time; it is always the right moment to add a new test. This is easier within a coding scenario. You may have missed a minor requirement but as soon you recognise it you can add a specific test to secure that requirement.</p>

<p>My test suite for real life scenarios is <em>practical common sense</em> but when it comes to a code scenario I can give some more specific pieces of advice which are specific to <em>Javascript</em>.</p>

<p><img src="/images/articles/common-sense.jpg" alt="common sense" class="img-circle center-block post-img" style="border: 1px solid #aaa" /></p>

<p><a href="http://karma-runner.github.io/0.12/index.html">KarmaJS</a> is a <a href="nodejs.org">NodeJS</a> command line tool which runs your unit tests. Among its features I should mention that you can run tests on multiple target browsers. You can test mobile devices connected to the same network. I use KarmaJS in combination with <a href="http://gruntjs.com/">GruntJS</a> or <a href="http://gulpjs.com/">GulpJS</a> to integrate tests into my building processes.</p>

<p><a href="http://mochajs.org/">MochaJS</a> is a Javascript test framework which helps in creating your specs files. It provides utility methods for a nice code organization of your unit tests.</p>

<p><a href="http://chaijs.com/">ChaiJS</a> is an <em>assertion library</em> that works great with Mocha. It allows you to write <code class="highlighter-rouge">expect(foo).to.be.a.string</code> so your assertions comes close to a natural language.</p>

<p><a href="http://sinonjs.org/">SinonJS</a> is a <em>mocking library</em> which provides a set of tools to investigate your code. Does this method fire twice? Did it receive a string argument? You can go further and completely mimic an <em>XHR request</em>.</p>

<blockquote>
  <p>I maintain a simple <em><a href="npmjs.org">NPM module</a></em> which combines the above tools to provide 
you with a ready to use test suite for Javascript: 
<a href="https://www.npmjs.com/package/grunt-mocha-chai-sinon">grunt-mocha-chai-sinon</a>.</p>

  <p>For a more sophisticated tool that brings a building process for <em>single page applications</em>
give a try to <a href="https://github.com/PoliteJS/workspace">PoliteJS/Workspace</a>.</p>
</blockquote>

<p><a href="http://www.webdriver.io/">WebDriver</a> is a NodeJS bridge to <a href="http://www.seleniumhq.org/">Selenium</a> functional testing suite. You can build your <em>FAT</em> in Javascript driving a browsing session with full access to Selenium’s API.</p>

<p><a href="http://dalekjs.com/">DalekJS</a> is a standalone alternative to <em>WebDriver</em>. Even if it is on an early stage it looks very promising.</p>

<h3 id="so-remember-your-takeaway">So remember your Takeaway:</h3>

<ol>
  <li>the <em>Big What The Fuck</em> is always lurking and there is no way to avoid it</li>
  <li><strong>testing is the best strategy</strong> you have to mitigate the risk of a <em>BWTF</em></li>
  <li>you can apply testing to your professional and private life
<!-- /Markdown --></li>
</ol>

<p><img src="/images/articles/succeed.jpg" alt="success" class="img-circle center-block post-img" /></p>


</div>

<!-- More Articles -->
<div class="post-list">
    
    <h2>Further Readings</h2>

    
        
            <div class="card card-block post-list-item">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="col-xs-2">
                <a class="post-link" href="/2015/02/10/holy-grail-of-code-sharing.html">
                    <img src="/images/articles/holy-grail-of-code-sharing.jpg" class="img-circle center-block">
                </a>
            </div>
            <div class="col-xs-10">
                <a class="post-link" href="/2015/02/10/holy-grail-of-code-sharing.html">
                    <h3>The Holy Grail of Code Sharing</h3>
                    <div><p>Code sharing is a concept which is whispered in low tone around the office, is being shouted loud by tools producers and is simply misunderstood by the great part of us, IT folks.</p>

</div>
                </a>
            </div>
        </div>
    </div>
</div>
        
    
        
            <div class="card card-block post-list-item">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="col-xs-2">
                <a class="post-link" href="/2015/01/16/free-backup-strategies-to-sleep-better.html">
                    <img src="/images/articles/happy-life.jpg" class="img-circle center-block">
                </a>
            </div>
            <div class="col-xs-10">
                <a class="post-link" href="/2015/01/16/free-backup-strategies-to-sleep-better.html">
                    <h3>Sleep tight and have an happy Life!</h3>
                    <div><p>Backups are strange animals. In a perfect world you don’t need backups. You put efforts in building a solid backup strategy, you buy external drives, cloud storage and amazing software which you wish you never have to use in life.</p>

</div>
                </a>
            </div>
        </div>
    </div>
</div>
        
    
        
    
        
            <div class="card card-block post-list-item">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="col-xs-2">
                <a class="post-link" href="/2015/01/13/the-course-of-the-proud-developer.html">
                    <img src="/images/articles/teamwork.jpg" class="img-circle center-block">
                </a>
            </div>
            <div class="col-xs-10">
                <a class="post-link" href="/2015/01/13/the-course-of-the-proud-developer.html">
                    <h3>The Curse of the Proud Developer</h3>
                    <div><p>The sky was turning dark when I saw the first <em>Internal Server Error</em> (code 500). It was 5PM in the winter’s afternoon and we were close to the release deadline. My heart missed at least two beats while my mouse ran to the reload button: “It may be just a network error, I thought”. But it wasn’t.</p>

</div>
                </a>
            </div>
        </div>
    </div>
</div>
        
    
</div>

<a href="/" class="btn btn-secondary-outline btn-lg" style="position:fixed;top:5px;right:5px;color:#444;border:0px solid #444;">
    X
</a>
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.1.1/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js"></script>
</html>
